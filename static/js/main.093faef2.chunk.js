(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],[,,,,,,,function(t,e,n){t.exports={section:"Section_section__2Z4lg"}},function(t,e,n){t.exports={task:"TaskItem_task__1A4Lm"}},function(t,e,n){t.exports={container:"Tasks_container__1Hfjb"}},function(t,e,n){t.exports={form:"TaskForm_form__2cjQt"}},function(t,e,n){t.exports={form:"EditTaskForm_form__3uYZR"}},,,,,function(t,e,n){},,function(t,e,n){"use strict";n.r(e);var r=n(6),c=n.n(r),a=(n(16),n(4)),s=n(1),o=n(7),i=n.n(o),u=n(0),d=function(t){return Object(u.jsx)("section",{className:i.a.section,children:t.children})},l=n(8),j=n.n(l),b=function(t){return Object(u.jsx)("li",{className:j.a.task,children:t.children})},f=n(9),p=n.n(f),h=function(t){var e=Object(u.jsx)("h2",{children:"No tasks found. Start adding some!"});t.items.length>0&&(e=Object(u.jsx)("ul",{children:t.items.map((function(e){return Object(u.jsxs)(b,{children:[e.text,Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{onClick:function(){return t.onDelete(e.id)},children:"Delete"}),Object(u.jsx)("button",{onClick:function(){return t.onEdit(e.id)},children:"Edit"})]})]},e.id)}))}));var n=e;return t.error&&(n=Object(u.jsx)("button",{onClick:t.onFetch,children:"Try again"})),t.loading&&(n="Loading tasks..."),Object(u.jsx)(d,{children:Object(u.jsx)("div",{className:p.a.container,children:n})})},O=n(2),x=n(3),k=function(){var t=Object(s.useState)(!1),e=Object(a.a)(t,2),n=e[0],r=e[1],c=Object(s.useState)(null),o=Object(a.a)(c,2),i=o[0],u=o[1],d=Object(s.useCallback)(function(){var t=Object(x.a)(Object(O.a)().mark((function t(e,n){var c;return Object(O.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),u(null),t.prev=2,t.next=5,fetch(e.url,{method:e.method?e.method:"GET",headers:e.headers?e.headers:{},body:e.body?JSON.stringify(e.body):null});case 5:if((c=t.sent).ok){t.next=8;break}throw new Error("Request failed!");case 8:return t.t0=n,t.next=11,c.json();case 11:t.t1=t.sent,(0,t.t0)(t.t1),t.next=19;break;case 15:t.prev=15,t.t2=t.catch(2),u(t.t2.message||"Something went wrong!");case 19:r(!1);case 20:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e,n){return t.apply(this,arguments)}}(),[]);return{isLoading:n,error:i,sendRequest:d}},m=n(10),v=n.n(m),g=function(t){var e=t.onEnterTask,n=t.loading,r=Object(s.useRef)();return Object(u.jsxs)("form",{className:v.a.form,onSubmit:function(t){t.preventDefault();var n=r.current.value;n.trim().length>0&&(e(n),r.current.value="",r.current.focus())},children:[Object(u.jsx)("input",{type:"text",ref:r}),Object(u.jsx)("button",{children:n?"Sending...":"Add Task"})]})},T=function(t){var e=t.onAddTask,n=k(),r=n.isLoading,c=n.error,a=n.sendRequest,o=Object(s.useCallback)((function(t,n){var r=n.name;e({id:r,text:t})}),[e]),i=function(){var t=Object(x.a)(Object(O.a)().mark((function t(e){return Object(O.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({url:"https://custom-hooks-113a5-default-rtdb.europe-west1.firebasedatabase.app/tasks.json",method:"POST",headers:{"Content-Type":"application/json"},body:{text:e}},o.bind(null,e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(u.jsxs)(d,{children:[Object(u.jsx)(g,{onEnterTask:i,loading:r}),c&&Object(u.jsx)("p",{children:c})]})},E=n(11),w=n.n(E),y=function(t){var e=t.onEnterTask,n=t.loading,r=t.editText,c=Object(s.useRef)(null);Object(s.useEffect)((function(){null!==c&&void 0!==c&&c.current&&(c.current.value=r)}),[]);return Object(u.jsxs)("form",{className:w.a.form,onSubmit:function(t){t.preventDefault();var n=null===c||void 0===c?void 0:c.current.value;n.trim().length>0&&(e(n),c.current.value="",c.current.focus())},children:[Object(u.jsx)("input",{type:"text",ref:c}),Object(u.jsx)("button",{children:n?"Sending...":"Edit Task"})]})},_=function(t){var e=t.onEditTask,n=t.task,r=k(),c=r.isLoading,a=r.error,o=r.sendRequest,i=n.text,l=n.id,j=Object(s.useCallback)((function(){e()}),[e]),b=function(){var t=Object(x.a)(Object(O.a)().mark((function t(e){return Object(O.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o({url:"https://custom-hooks-113a5-default-rtdb.europe-west1.firebasedatabase.app/tasks/".concat(l,".json"),method:"PATCH",headers:{"Content-Type":"application/json"},body:{text:e}},j);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(u.jsxs)(d,{children:[Object(u.jsx)(y,{onEnterTask:b,loading:c,editText:i}),a&&Object(u.jsx)("p",{children:a})]})};var S=function(){var t=Object(s.useState)([]),e=Object(a.a)(t,2),n=e[0],r=e[1],c=Object(s.useState)((function(){return{edit:!1,task:{id:"",text:""}}})),o=Object(a.a)(c,2),i=o[0],d=o[1],l=k(),j=l.isLoading,b=l.error,f=l.sendRequest,p=Object(s.useCallback)((function(t){var e=[];for(var n in t)e.push({id:n,text:t[n].text});r(e)}),[]),O=function(){f({url:"https://custom-hooks-113a5-default-rtdb.europe-west1.firebasedatabase.app/tasks.json"},p)};Object(s.useEffect)((function(){O()}),[]);var x=Object(s.useCallback)((function(t){r((function(e){return e.concat(t)}))}),[]);return Object(u.jsxs)(u.Fragment,{children:[!i.edit&&Object(u.jsx)(T,{onAddTask:x}),i.edit&&Object(u.jsx)(_,{onEditTask:function(){O(),d({edit:!1,task:null})},task:i.task}),Object(u.jsx)(h,{items:n,loading:j,error:b,onFetch:O,onDelete:function(t){f({url:"https://custom-hooks-113a5-default-rtdb.europe-west1.firebasedatabase.app/tasks/".concat(t,".json"),method:"DELETE",headers:{"Content-Type":"application/json"}},(function(){return r((function(e){return e.filter((function(e){return e.id!==t}))}))}))},onEdit:function(t){var e=n.find((function(e){return e.id===t}));d({edit:!0,task:e})}})]})};c.a.render(Object(u.jsx)(S,{}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.093faef2.chunk.js.map