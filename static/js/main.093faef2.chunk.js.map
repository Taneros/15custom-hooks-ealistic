{"version":3,"sources":["components/UI/Section.module.css","components/Tasks/TaskItem.module.css","components/Tasks/Tasks.module.css","components/NewTask/TaskForm.module.css","components/EditTask/EditTaskForm.module.css","components/UI/Section.js","components/Tasks/TaskItem.js","components/Tasks/Tasks.js","hooks/use-http.js","components/NewTask/TaskForm.js","components/NewTask/NewTask.js","components/EditTask/EditTaskForm.js","components/EditTask/EditTask.js","App.js","index.js"],"names":["module","exports","Section","props","className","classes","section","children","TaskItem","task","Tasks","taskList","items","length","map","text","onClick","onDelete","id","onEdit","content","error","onFetch","loading","container","useHttp","useState","isLoading","setIsLoading","setError","sendRequest","useCallback","requestConfig","applyData","fetch","url","method","headers","body","JSON","stringify","response","ok","Error","json","message","TaskForm","onEnterTask","taskInputRef","useRef","form","onSubmit","event","preventDefault","enteredValue","current","value","trim","focus","type","ref","NewTask","onAddTask","postTasks","tranformTask","taskText","taskObj","generatedId","name","enterTaskHandler","bind","EditTaskForm","editText","useEffect","EditTask","onEditTask","editTask","handleTaskEnter","App","tasks","setTasks","edit","isEdit","setIsEdit","transformTask","loadedTasks","taskKey","push","handleFetchTasks","prevTasks","concat","filter","item","find","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.093faef2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"Section_section__2Z4lg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"task\":\"TaskItem_task__1A4Lm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Tasks_container__1Hfjb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"TaskForm_form__2cjQt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"EditTaskForm_form__3uYZR\"};","import classes from './Section.module.css';\n\nconst Section = (props) => {\n  return <section className={classes.section}>{props.children}</section>;\n};\n\nexport default Section;\n","import classes from './TaskItem.module.css';\n\nconst TaskItem = (props) => {\n  return <li className={classes.task}>{props.children}</li>;\n};\n\nexport default TaskItem;\n","import Section from '../UI/Section';\nimport TaskItem from './TaskItem';\nimport classes from './Tasks.module.css';\n\nconst Tasks = (props) => {\n  let taskList = <h2>No tasks found. Start adding some!</h2>;\n\n  if (props.items.length > 0) {\n    taskList = (\n      <ul>\n        {props.items.map((task) => (\n          <TaskItem key={task.id}>\n            {task.text}\n            <div>\n              <button onClick={() => props.onDelete(task.id)}>Delete</button>\n              <button onClick={() => props.onEdit(task.id)}>Edit</button>\n            </div>\n          </TaskItem>\n        ))}\n      </ul>\n    );\n  }\n\n  let content = taskList;\n\n  if (props.error) {\n    content = <button onClick={props.onFetch}>{`Try again`}</button>;\n  }\n\n  if (props.loading) {\n    content = 'Loading tasks...';\n  }\n\n  return (\n    <Section>\n      <div className={classes.container}>{content}</div>\n    </Section>\n  );\n};\n\nexport default Tasks;\n","import {useState, useCallback} from 'react';\r\n\r\nconst useHttp = () => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const sendRequest = useCallback(async (requestConfig, applyData) => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await fetch(requestConfig.url, {\r\n        method: requestConfig.method ? requestConfig.method : 'GET',\r\n        headers: requestConfig.headers ? requestConfig.headers : {},\r\n        body: requestConfig.body ? JSON.stringify(requestConfig.body) : null,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Request failed!');\r\n      }\r\n\r\n      applyData(await response.json());\r\n    } catch (err) {\r\n      debugger;\r\n      setError(err.message || 'Something went wrong!');\r\n    }\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  return {\r\n    isLoading,\r\n    error,\r\n    sendRequest,\r\n  };\r\n};\r\n\r\nexport default useHttp;\r\n","import {useRef} from 'react';\n\nimport classes from './TaskForm.module.css';\n\nconst TaskForm = ({onEnterTask, loading}) => {\n  const taskInputRef = useRef();\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n\n    const enteredValue = taskInputRef.current.value;\n\n    if (enteredValue.trim().length > 0) {\n      onEnterTask(enteredValue);\n      taskInputRef.current.value = '';\n      taskInputRef.current.focus();\n    }\n  };\n\n  return (\n    <form className={classes.form} onSubmit={submitHandler}>\n      <input type=\"text\" ref={taskInputRef} />\n      <button>{loading ? 'Sending...' : 'Add Task'}</button>\n    </form>\n  );\n};\n\nexport default TaskForm;\n","import React, {useCallback} from 'react';\nimport useHttp from '../../hooks/use-http';\n\nimport Section from '../UI/Section';\nimport TaskForm from './TaskForm';\n\nconst NewTask = ({onAddTask}) => {\n  const {isLoading, error, sendRequest: postTasks} = useHttp();\n\n  const tranformTask = useCallback(\n    (taskText, taskObj) => {\n      const generatedId = taskObj.name; // firebase-specific => \"name\" contains generated id\n      const createdTask = {id: generatedId, text: taskText};\n\n      onAddTask(createdTask);\n    },\n    [onAddTask],\n  );\n\n  const enterTaskHandler = async (taskText) => {\n    postTasks(\n      {\n        url: 'https://custom-hooks-113a5-default-rtdb.europe-west1.firebasedatabase.app/tasks.json',\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: {text: taskText},\n      },\n      // preconfigure the function\n      tranformTask.bind(null, taskText),\n    );\n  };\n\n  return (\n    <Section>\n      <TaskForm onEnterTask={enterTaskHandler} loading={isLoading} />\n      {error && <p>{error}</p>}\n    </Section>\n  );\n};\n\nexport default NewTask;\n","import {useRef, useEffect} from 'react';\n\nimport classes from './EditTaskForm.module.css';\n\nconst EditTaskForm = ({onEnterTask, loading, editText}) => {\n  const taskInputRef = useRef(null);\n\n  useEffect(() => {\n    if (taskInputRef?.current) taskInputRef.current.value = editText;\n  }, []);\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n\n    const enteredValue = taskInputRef?.current.value;\n\n    if (enteredValue.trim().length > 0) {\n      onEnterTask(enteredValue);\n      taskInputRef.current.value = '';\n      taskInputRef.current.focus();\n    }\n  };\n\n  return (\n    <form className={classes.form} onSubmit={submitHandler}>\n      <input type=\"text\" ref={taskInputRef} />\n      <button>{loading ? 'Sending...' : 'Edit Task'}</button>\n    </form>\n  );\n};\n\nexport default EditTaskForm;\n","import React, {useCallback} from 'react';\nimport useHttp from '../../hooks/use-http';\n\nimport Section from '../UI/Section';\nimport EditTaskForm from './EditTaskForm';\n\nconst EditTask = ({onEditTask, task}) => {\n  const {isLoading, error, sendRequest: editTask} = useHttp();\n  const {text, id} = task;\n  debugger;\n\n  const tranformTask = useCallback(() => {\n    onEditTask();\n  }, [onEditTask]);\n\n  const handleTaskEnter = async (taskText) => {\n    editTask(\n      {\n        url: `https://custom-hooks-113a5-default-rtdb.europe-west1.firebasedatabase.app/tasks/${id}.json`,\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: {text: taskText},\n      },\n      tranformTask,\n    );\n  };\n\n  return (\n    <Section>\n      <EditTaskForm\n        onEnterTask={handleTaskEnter}\n        loading={isLoading}\n        editText={text}\n      />\n      {error && <p>{error}</p>}\n    </Section>\n  );\n};\n\nexport default EditTask;\n","import React, {useEffect, useState, useCallback} from 'react';\n\nimport Tasks from './components/Tasks/Tasks';\nimport NewTask from './components/NewTask/NewTask';\nimport useHttp from './hooks/use-http';\nimport EditTask from './components/EditTask/EditTask';\n\nexport const url =\n  'https://custom-hooks-113a5-default-rtdb.europe-west1.firebasedatabase.app/tasks.json';\n\nfunction App() {\n  const [tasks, setTasks] = useState([]);\n  const [isEdit, setIsEdit] = useState(() => ({\n    edit: false,\n    task: {id: '', text: ''},\n  }));\n\n  const {isLoading, error, sendRequest} = useHttp();\n\n  const transformTask = useCallback((taskObj) => {\n    const loadedTasks = [];\n\n    for (const taskKey in taskObj) {\n      loadedTasks.push({id: taskKey, text: taskObj[taskKey].text});\n    }\n\n    setTasks(loadedTasks);\n  }, []);\n\n  const handleFetchTasks = () => {\n    sendRequest(\n      {\n        url,\n      },\n      transformTask,\n    );\n  };\n\n  useEffect(() => {\n    handleFetchTasks();\n  }, []);\n\n  const onAddTask = useCallback((task) => {\n    setTasks((prevTasks) => prevTasks.concat(task));\n  }, []);\n\n  const handleSubmitEdit = () => {\n    handleFetchTasks();\n    setIsEdit({edit: false, task: null});\n  };\n\n  const handleEditTask = (id) => {\n    const task = tasks.find((task) => task.id === id);\n    setIsEdit({edit: true, task});\n    debugger;\n  };\n\n  const handleDeleteTask = (id) => {\n    sendRequest(\n      {\n        url: `https://custom-hooks-113a5-default-rtdb.europe-west1.firebasedatabase.app/tasks/${id}.json`,\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      },\n      () => setTasks((tasks) => tasks.filter((item) => item.id !== id)),\n    );\n  };\n\n  return (\n    <>\n      {!isEdit.edit && <NewTask onAddTask={onAddTask} />}\n      {isEdit.edit && (\n        <EditTask onEditTask={handleSubmitEdit} task={isEdit.task} />\n      )}\n      <Tasks\n        items={tasks}\n        loading={isLoading}\n        error={error}\n        onFetch={handleFetchTasks}\n        onDelete={handleDeleteTask}\n        onEdit={handleEditTask}\n      />\n    </>\n  );\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}